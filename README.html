<!DOCTYPE html>
<html><head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>README â€” KD and metal rich aerosols</title>
    
  <link href="_static/css/theme.css" rel="stylesheet"/>
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet"/>

    
  <link href="_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
  <link as="font" crossorigin="" href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
  <link as="font" crossorigin="" href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>

    
      

    
    <link href="_static/pygments.css" rel="stylesheet" type="text/css"/>
    <link href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" rel="stylesheet" type="text/css"/>
    <link href="_static/togglebutton.css" rel="stylesheet" type="text/css"/>
    <link href="_static/copybutton.css" rel="stylesheet" type="text/css"/>
    <link href="_static/mystnb.css" rel="stylesheet" type="text/css"/>
    <link href="_static/sphinx-thebe.css" rel="stylesheet" type="text/css"/>
    <link href="_static/custom.css" rel="stylesheet" type="text/css"/>
    <link href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" rel="stylesheet" type="text/css"/>
    <link href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" rel="stylesheet" type="text/css"/>
    
  <link as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js" rel="preload"/>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "https://github.com/AlFontal/kd-metals-swc");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "ðŸ’¬ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link href="https://alfontal.github.io/kd-metals-swc/README.html" rel="canonical"/>
    <link href="_static/favicon.ico" rel="shortcut icon"/>
    <link href="genindex.html" rel="index" title="Index"/>
    <link href="search.html" rel="search" title="Search"/>
    <link href="hysplit_trajectories.html" rel="next" title="Modelling the air sources with HYSPLIT"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="None" name="docsearch:language"/>
    

    <!-- Google Analytics -->
    
  </head>
  <body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img alt="logo" class="logo" src="_static/logo.png"/>
      
      
      <h1 class="site-logo" id="site-title">KD and metal rich aerosols</h1>
      
    </a>
</div><form action="search.html" class="bd-search d-flex align-items-center" method="get">
  <i class="icon fas fa-search"></i>
  <input aria-label="Search this book..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search this book..." type="search"/>
</form><nav aria-label="Main" class="bd-links" id="bd-docs-nav">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1 current">
  <a class="reference internal" href="#">
   README
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Notebooks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="hysplit_trajectories.html">
   HYSPLIT backtrajectories
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="metals.html">
   Chemistry and KD synchrony
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="weekly-cycle-figures-ang.html">
   Figure 4E
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
<div>           
<hr/>
<a href="https://helical-itn.eu/">
<img src="https://helical-itn.eu/wp-content/uploads/2020/01/cropped-HELICAL_logo-3.png" width="200px"/>
</a>
<p></p>
<a href="https://www.isglobal.org/en/-/clima-y-salud">
<img src="https://www.isglobal.org/isglobal-new-theme/assets/images/isglobal/logo-isglobal-en.png" width="200px"/>
</a>

</div>

</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" class="navbar-toggler ml-0" data-placement="bottom" data-target=".site-navigation" data-toggle="collapse" id="navbar-toggler" title="Toggle navigation" type="button">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button aria-label="Download this page" class="btn btn-secondary topbarbtn" id="dropdown-buttons-trigger"><i class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/README.md"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Download source file" type="button">.md</button></a>
        <!-- Download PDF via print -->
        <button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" id="download-print" onclick="printPdf(this)" title="Print to PDF" type="button">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button aria-label="Connect with source repository" class="btn btn-secondary topbarbtn" id="dropdown-buttons-trigger"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button" href="https://github.com/AlFontal/kd-metals-swc"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Source repository" type="button"><i class="fab fa-github"></i>repository</button></a>
        <a class="issues-button" href="https://github.com/AlFontal/kd-metals-swc/issues/new?title=Issue%20on%20page%20%2FREADME.html&amp;body=Your%20issue%20content%20here."><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Open an issue" type="button"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button aria-label="Fullscreen mode" class="btn btn-secondary topbarbtn" data-placement="bottom" data-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode" type="button"><i class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav aria-label="Page" id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reproducibility">
   Reproducibility
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python">
     Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#r">
     R
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hysplit">
     HYSPLIT
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#meteorology-data">
       Meteorology data
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div class="row" id="main-content">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div class="onlyprint" id="jb-print-docs-body">
                <h1>README</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reproducibility">
   Reproducibility
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python">
     Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#r">
     R
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hysplit">
     HYSPLIT
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#meteorology-data">
       Meteorology data
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="readme">
<h1>README<a class="headerlink" href="#readme" title="Permalink to this headline">Â¶</a></h1>
<p><img alt="license" src="https://img.shields.io/badge/license-BSD--3--Clause-green"/>
<a class="reference external" href="https://alfontal.github.io/kd-metals-swc"><img alt="GH-pages" src="https://img.shields.io/badge/Code--Pages-Click--to--access-red"/></a>
<img alt="python" src="https://img.shields.io/badge/python-v3.8-orange"/>
<img alt="R" src="https://img.shields.io/badge/R-v4.1.2-blue"/></p>
<p>This repository contains the materials and code necessary to reproduce the analysis on the manuscript
<em>Fine metal-rich aerosols from intensive farming and urban pollution promote Kawasaki disease outbreaks</em>.</p>
<p><strong>To check the code notebooks, please follow <a class="reference external" href="https://alfontal.github.io/kd-metals-swc">this link</a></strong>.</p>
<p>Since the manuscript is in the pre-publication step, we are keeping the source code on a private repository
in GitHub. To aid in the review process and provide maximum transparency and ensure the reproducibility of the
experiments, we are sharing the repository (which can be cloned and then executed) with
the step-by-step code used to generate the analyses and figures shown in the manuscript (and possibly some more).</p>
<p>To ensure the anonimity during the peer-review process, we are using <a class="reference external" href="https://gitfront.io/">Gitfront</a> to expose a read-only version of the repository which can only be accessed through the shared link. Since most of the code is based on Jupyter Notebooks executing Python and R code, and Gitfront doesnâ€™t render them in a nice manner, the Github Pages site (rendered thanks to the <a class="reference external" href="https://jupyterbook.org/">Jupyterbook</a> and <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> projects) of the repo can be accessed through the <span class="xref myst">GitHub Pages Site</span> with a nice render of the notebooks.</p>
<div class="section" id="reproducibility">
<h2>Reproducibility<a class="headerlink" href="#reproducibility" title="Permalink to this headline">Â¶</a></h2>
<p>The main requirements to execute the code will be to have installed in your computing environment:</p>
<ul class="simple">
<li><p>Python &gt;=3.8</p></li>
<li><p>R &gt;= 4.1.2</p></li>
<li><p>HYSPLIT 5.2.0</p></li>
</ul>
<p>Instructions to reproduce the environment follow:</p>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">Â¶</a></h3>
<p>To ensure reproducibility of the Python environment, we use <code class="docutils literal notranslate"><span class="pre">poetry</span></code>, so the dependencies of the project are defined in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. Go to the <code class="docutils literal notranslate"><span class="pre">poetry</span></code> <a class="reference external" href="https://python-poetry.org/docs/">docs</a> to find out how to install it in your machine in case itâ€™s not there already.</p>
<p>Then, clone this repo, go to the root folder, and run <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span></code>.</p>
</div>
<div class="section" id="r">
<h3>R<a class="headerlink" href="#r" title="Permalink to this headline">Â¶</a></h3>
<p>The R code used in the analyses was executed using R version 4.1.2, and the list of dependencies is the following, so make sure to have them installed in your environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ggplot2</span>
<span class="n">dplyr</span>
<span class="n">tidyr</span>
<span class="n">readr</span>
<span class="n">stringr</span>
<span class="n">tibble</span>
<span class="n">reprex</span>
<span class="n">lubridate</span>
<span class="n">caTools</span>
<span class="n">TeachingDemos</span>
<span class="n">reshape2</span>
<span class="n">caret</span>
<span class="n">ggpubr</span>
<span class="n">purr</span>
<span class="n">plot3D</span>
<span class="n">Hmisc</span>
<span class="n">progress</span>

</pre></div>
</div>
</div>
<div class="section" id="hysplit">
<h3>HYSPLIT<a class="headerlink" href="#hysplit" title="Permalink to this headline">Â¶</a></h3>
<p>To estimate the backtrajectories of air sources, in this study we use <a class="reference external" href="https://www.ready.noaa.gov/HYSPLIT.php">HYSPLIT 5.2</a>. You will need a local installation of the last version of HYSPLIT in order to be able to run the model yourself. Check the documentation on the provided link to be able to perform the installation on your local machine, as it changes depending on your OS.</p>
<div class="section" id="meteorology-data">
<h4>Meteorology data<a class="headerlink" href="#meteorology-data" title="Permalink to this headline">Â¶</a></h4>
<p>You will also need to download the associated gridded meteorology data in order to be able tu run HYSPLIT. In this case, the data used is GDAS 1x1 data, from 2011 to 2016. This is not included in the repository as it contains several GB of information. This data is available for download via the NOAAâ€™s archives FTP, accessible through this link: <a class="reference external" href="https://www.ready.noaa.gov/archives.php">https://www.ready.noaa.gov/archives.php</a>.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="right-next" href="hysplit_trajectories.html" id="next-link" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Modelling the air sources with HYSPLIT</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Alejandro Fontal, Albert Navarro, Xavier RodÃ³<br/>
    
        Â© Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  
</body></html>